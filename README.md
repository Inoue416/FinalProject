# はきだしケア
## 1. プロジェクトの概要
&emsp;本アプリケーションはその時**思ったこと**、**不安**に思っていること、**嬉しかったこと**などをそのままはきだし、その時の**心境を数値、グラフ化**してくれるWebアプリケーションである。<br />
&emsp;フロントエンドに**Vue.js**、バックエンドには**Flask**を用いて**シングルページアプリケーション**として開発している。<br />
&emsp;このアプリケーションを用いることで自身のマインドがプラスに向いているのか、マイナスに向いているのかを確認できる。
## 2. 開発の目的
- アイディアについて<br />
  &emsp;今日、コロナ渦になり電車での人身事故やうつ病になる人が増えてきており、自身では**心境の変化**や自身の心境がポジティブなのかマイナスなのかは**わかりずらいもの**である。<br />
  &emsp;上記のことから自身の心境をグラフや数値で見ることで意識的に自身の心境を確認することで**早期的に上記の問題に自身で気づきプラスへとむかえる手助けをすることを目的**とする。
- 技術について<br />
  &emsp;自身が現在フロントエンド側の開発やシングルアプリケーションの開発について興味があったためフロントエンドのフレームワークやバックエンド側のAPIを作成し、**フロントエンドとシングルアプリケーションの開発について学ぶことを目的**として行う。

## 3. 開発環境
**(バックエンド)**
- 開発言語・フレームワーク<br />
  Python, Falsk, Asari(ネガポジ判定ライブラリ) ext.<br />
  またPythonを用いて仮想環境を作成して用いる。<br />
(**\*詳しいライブラリやバージョンはrequirements.txtをさんしょうしてください。**)<br />

**(フロントエンド)**
- 開発言語・フレームワーク<br />
  Javascript, HTML, CSS, Bootstrap, Vue.js, npm, Char.js ext.<br />
  (**\*詳しいバージョンなどはプロジェクト内のpackage.jsonを参照してください**)

**(データベース)**
- PostgreSQL (version 15.1)

**(環境変数について)**<br />
&emsp;環境変数ファイルはmental_care_appの直下に.envファイルで設定してください。また、以下の2つの変数を設定してください。<br />
- DB_URI=
- APP_SECRET_KEY=

## 4. 機能の概要
&emsp;本アプリケーションは主に以下の機能を備えています。<br />
また本アプリケーションはシングルアプリケーションのためFlask(バックエンド)はAPIとしてフロントエンド側からコール受け、レスポンスを返す。フロントエンド側ではレスポンスに応じた処理を行う。<br />
**(機能一覧)**
- サインアップ
- ログイン
- ログアウト
- はきだし・ネガポジ判定
- はきだしの一覧表示
- ネガポジのグラフ化・ナビバーのカラー変更

## 5. 各機能の詳細
### 5.1 サインアップ
&emsp;本機能では**新規ユーザーの登録**を行います。<br />
ユーザーには以下の入力項目を求めます。
- ユーザー名
- メールアドレス
- パスワード
- パスワード(確認用)

&emsp;フロントエンド・バックエンド共に各項目のバリデーションを搭載しており、ユーザーの入力やフォームのフォーカスの**アクション毎にバリデーション**を行っており、全ての項目のバリデーションを**通過**しないとボタンがアクティブにならずサーバーへとフォームを送ることはできない仕様になっています。また、仮に開発者ツールなどで**HTMLの属性をを書き換え、フォームを送信**されても**バックエンド側のバリデーション**ではじかれるようになっています。<br />
&emsp;メールアドレスに関しては**入力欄のフォーカスが外れた**タイミングでバックエンド側に入力されたメールアドレスを送信し、**登録済み**であればその旨を返信し、ユーザーへエラーを**通知**する機能が搭載されている。<br />
&emsp;パスワードの入力機能についてはパスワードを入力させ、バリデーションを通過すれば確認用のフォームの入力が可能になり、上部のパスワードと一致しなければ送信ができないようになっている。

### 5.2 ログイン
&emsp;ログイン機能では**登録されたユーザーのログイン**を行う。
ログイン機能は以下の入力を求めます。
- メールアドレス
- パスワード

&emsp;パスワード同様にバリデーションを通過するとバックエンド側へフォームを送信する。認証を通過すればセッション、クッキーをセットしログイン状態にする。

### 5.3 ログアウト
&emsp;ログアウト機能では**ログイン状態を消去し、クッキー、セッションを削除、ログアウト状態**にする。<br />
ログアウト機能では**クリックされるとイベント**を起こし、**APIの呼び出しバックエンド側のセッションとフロントエンド側の状態、クッキーのリセットを行い、ホームへリダイレクト**する。
### 5.4 はきだし
&emsp;はきだし機能ではテキストエリアに思ったことを入力し送信してもらう。バックエンドは受け取り次第その文章の**ネガポジ判定**を行い、データベースへと記録する。ネガポジの判定にはPythonのAsariというライブラリを用いて行っている。<br />
&emsp;バリデーションに関してはフロントエンド側、バックエンド側共に搭載されている。**バリデーションでスクリプトなどに使用する文字などを使用不可にすることでスクリプトなどを埋め込めない**ようにしている。
### 5.5 はきだし一覧
&emsp;上記のはきだし機能で追加されたデータを登録日降順で見ることができる機能である。一覧はテーブルで**はきだした内容**、**ネガポジの点数**、**ネガティブかポジティブの判定**、**はきだした日時**が表示される。**1ページ当たり10個**のデータを見ることができ、**ページネーションによって表示データを切り替え**られる。
&emsp;ページネーションについては初めに全データを取得して起き、クリックした**ボタンの番号の変化を検知**し、表示するデータを**切り替え**るようにして実装している。
### 5.6 はきだいのグラフ化・ナビバーのカラー変更
&emsp;グラフをホーム画面に表示する機能である。グラフの描画はログインしているその日のみのデータを取得し、**ネガポジの点数を縦軸**、そのデータの**登録日時を横軸**に設定して描画する。グラフの描画にはChart.jsというライブラリを使用した。また**新しくはきだしを行った時はそのデータの追加を検知**してグラフを**再レンダリング**するようにしてグラフを**常に更新**している。<br />
&emsp;またグラフ描画の際に取得したデータから最新データのネガポジ点数を状態にセットする。この状態の変化を検知して条件によってナビバーのカラーを変更する機能がある。これによりよりユーザーの現在の心境を一目でわかるようになると考える。

## 6. 今後実装したい機能
&emsp;今後は以下の機能を実装したいと考えている。
- はきだし内容の編集と削除
- ナビバーのカラーの変更をより細分化
- 年や日などの指定によるデータのグラフ描画

## 7. 今回学べたこと
&emsp;今回の開発では**Vue.jsの基本的な文法や使い方**、Vue-routerを用いた**SPAでのルーティング**、Vuexによる**フロントエンドの状態管理**を学ぶことができた。またバックエンド側では**APIの作成**やフロントエンドとの通信について学ぶことができた。Vue.jsでの各パーツの**コンポーネント化**の方法や設計について学べた。<br />
&emsp;また今後、現在よりも**よりよい設計ができる**ようにフロントエンドのフレームワークについての**理解を深め**、バックエンド側では**RESTAPI**についても挑戦していきたい。<br />
同時に次はページの**デザイン、装飾**(CSS、アニメーション)にも取り組んでいきたい。

## YoutubeのURL
